<?xml version="1.0" encoding="utf-8" ?>
<Defs>
  
  <HediffDef>
    <defName>HyperManipulator_EnvironmentalHeat</defName>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(0.95, 0.6, 0.75)</defaultLabelColor>
    <label>manipulator overheating failure</label>
    <!-- <taleOnVisible>HypothermiaRevealed</taleOnVisible> -->
	<maxSeverity>10.0</maxSeverity>
    <isBad>true</isBad>
	<hediffGivers>
		<li Class="HediffGiver_Heat">
		  <hediff>HyperManipulator_EnvironmentalHeat</hediff>
		</li>
	</hediffGivers>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.1</severityPerDay>
      </li>
      <li Class="HediffCompProperties_Discoverable">
        <sendLetterWhenDiscovered>true</sendLetterWhenDiscovered>
        <discoverLetterLabel>Manipulator overheating :{0}</discoverLetterLabel>
        <discoverLetterText>The physic manipulator on {0} has begun to fail due to overheating ambient temperature. If it is not cooled on time, the manipulator will soon be seriously out of alignment and affect manipulate ability.\n\nEffects of overheating are temporary. The manipulator returned to a safe environmental temperature will eventually backs to normal and will not leave permanent damage, but the colonist may still be heatstroke or burned due to the high temperature.</discoverLetterText>
        <letterType>NegativeEvent</letterType>
        <messageType>NegativeEvent</messageType>
      </li>
    </comps>
    <stages>
      <li>
        <label>initial</label>
        <becomeVisible>false</becomeVisible>
      </li>
      <li>
        <label>minor</label>
        <minSeverity>0.05</minSeverity>
        <capMods>
          <li>
            <capacity>Manipulation</capacity>
            <postFactor>0.92</postFactor>
          </li>
        </capMods>
      </li>
      <li>
        <label>moderate</label>
        <minSeverity>0.2</minSeverity>
        <capMods>
          <li>
            <capacity>Manipulation</capacity>
            <postFactor>0.8</postFactor>
          </li>
        </capMods>
      </li>
      <li>
        <label>serious</label>
        <minSeverity>0.35</minSeverity>
        <capMods>
          <li>
            <capacity>Manipulation</capacity>
            <postFactor>0.5</postFactor>
          </li>
        </capMods>
      </li>
      <li>
        <label>extreme</label>
        <minSeverity>0.62</minSeverity>
        <capMods>
          <li>
            <capacity>Manipulation</capacity>
            <postFactor>0.1</postFactor>
          </li>
        </capMods>
      </li>
      <li>
        <label>critical</label>
        <minSeverity>0.95</minSeverity>
        <capMods>
          <li>
            <capacity>Manipulation</capacity>
            <postFactor>0.05</postFactor>
          </li>
        </capMods>
      </li>
      <li>
        <label>fatal</label>
        <minSeverity>3</minSeverity>
        <!-- <lifeThreatening>true</lifeThreatening> -->
        <capMods>
          <li>
            <capacity>Manipulation</capacity>
            <postFactor>0.01</postFactor>
            <setMax>0.05</setMax>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>
  
  <HediffDef ParentName="AddedBodyPartBase">
    <defName>HyperManipulator</defName>
    <label>physic manipulator</label>
    <labelNoun>a physic manipulator</labelNoun>
	<description>An pair of devices replacing arms with a powerful remote manipulator.</description>
    <defaultLabelColor>(0.5, 0.75, 1)</defaultLabelColor>
    <stages>
      <li>
        <partIgnoreMissingHP>false</partIgnoreMissingHP>
        <!-- 
        <capMods>=
          <li>
            <capacity>Manipulation</capacity>
            <offset>0.5</offset>
            <postFactor>2</postFactor>
          </li>=
        </capMods>
		<statOffsets>
			<GlobalLearningFactor>1.5</GlobalLearningFactor>
			<PainShockThreshold>99999</PainShockThreshold>
		</statOffsets> -->
		<hediffGivers>
			<!-- <li Class="HediffGiver_RandomDrugEffect">
				<hediff>HyperManipulator</hediff>
				<minSeverity>0.50</minSeverity>
				<baseMtbDays>0.00002</baseMtbDays>
				<!- - <mtbDays>0.00002</mtbDays> - ->
				<partsToAffect>
					<li>Shoulder</li>
				</partsToAffect>
				<countToAffect>2</countToAffect>
			</li> -->
			<li Class="HediffGiver_Heat">
			  <hediff>HyperManipulator_EnvironmentalHeat</hediff>
			</li>
		</hediffGivers>
      </li>
    </stages>
    <addedPartProps>
      <solid>true</solid>
      <partEfficiency>5</partEfficiency>
      <betterThanNatural>true</betterThanNatural>
    </addedPartProps>
    <comps>
	  <!-- <li Class="HediffCompProperties_HealPermanentWounds" /> -->
      <li Class="HediffCompProperties_VerbGiver">
        <tools>
		  <li>
			<label>frost smasher</label>
			<capacities>
			  <li>Frostblast</li>
			</capacities>
			<power>20</power>
			<cooldownTime>1</cooldownTime>
			<surpriseAttack>
			  <extraMeleeDamages>
				<li>
				  <def>Stun</def>
				  <amount>20</amount>
				</li>
				<li>
				  <def>EMP</def>
				  <amount>20</amount>
				</li>
			  </extraMeleeDamages>
			</surpriseAttack>
		  </li>
        </tools>
      </li>
    </comps>
    <!-- <spawnThingOnRemoved>HyperManipulator</spawnThingOnRemoved> -->
  </HediffDef>
  
    <ThingDef ParentName="BodyPartArchotechBase">
    <defName>HyperManipulator</defName>
    <label>physic manipulator</label>
    <description>An pair of arm-replacing devices built by an unknown centaur-archotech. It removes one's arms, replacing it's shoulders with a powerful remote manipulator that can interact objects around without directly contect, strong enough to crush a thick hardwood branch, and precise enough to write a sonnet on a grain of rice. It can controllably generating Holographic projection which looks and feels like natural flesh, and dynamically reposition center of mass to keep balance. If it is harmed, it repairs itself over time. Its internal workings are a mystery to all minds.</description>
    <techLevel>Archotech</techLevel>
    <thingSetMakerTags>
      <!-- <li>RewardSpecial</li> -->
    </thingSetMakerTags>
    <statBases>
      <MarketValue>8000</MarketValue>
      <Mass>20</Mass>
    </statBases>
    <techHediffsTags>
      <!-- <li>Advanced</li> -->
    </techHediffsTags>
    <tradeability>Sellable</tradeability>
	
    <!--<ingestible>
      <preferability>NeverForNutrition</preferability>
      <!- - <drugCategory>Medical</drugCategory> - ->
      <baseIngestTicks>600</baseIngestTicks>
      <chairSearchRadius>0</chairSearchRadius>
      <maxNumToIngestAtOnce>1</maxNumToIngestAtOnce>
      <!- - <ingestSound>None</ingestSound> - ->
      <ingestHoldUsesTable>false</ingestHoldUsesTable>
      <outcomeDoers>
        <li Class="IngestionOutcomeDoer_GiveHediff">
		  <hediffDef>HyperManipulator</hediffDef>
          <severity>1.0</severity>
          <partsToAffect>
			<li>Shoulder</li>
			<li>Shoulder</li>
          </partsToAffect>
		  <divideByBodySize>false</divideByBodySize>
        </li>
        <li Class="IngestionOutcomeDoer_GiveHediff">
		  <hediffDef>HyperManipulator</hediffDef>
          <severity>1.0</severity>
          <partsToAffect>
			<li>Shoulder</li>
			<li>Shoulder</li>
          </partsToAffect>
		  <divideByBodySize>false</divideByBodySize>
        </li>
      </outcomeDoers>
    </ingestible> -->
    <!-- <comps>
      <li Class="CompProperties_Usable">
        <useJob>UseItem_NonInturruptible</useJob>
        <useLabel>assemble physic manipulator on self</useLabel>
        <useDuration>6000</useDuration>
      </li>
      <li Class="CompProperties_UseEffect">
        <compClass>IngestionOutcomeDoer_GiveHediff</compClass>
		<hediffDef>HyperManipulator</hediffDef>
		<severity>1</severity>
		<divideByBodySize>true</divideByBodySize>
      </li>
      <li Class="CompProperties_UseEffect">
        <compClass>IngestionOutcomeDoer_GiveHediff</compClass>
		<hediffDef>HyperManipulator</hediffDef>
		<severity>1</severity>
		<divideByBodySize>true</divideByBodySize>
      </li>
      <li Class="CompProperties_UseEffect">
        <compClass>CompUseEffect_DestroySelf</compClass>
      </li>
    </comps> -->
  </ThingDef>
  
  <JobDef>
    <defName>UseItem_NonInturruptible</defName>
    <driverClass>JobDriver_UseItem</driverClass>
    <reportString>using TargetA.</reportString>
    <playerInterruptible>false</playerInterruptible>
    <casualInterruptible>false</casualInterruptible>
	<suspendable>false</suspendable>
    <allowOpportunisticPrefix>true</allowOpportunisticPrefix>
  </JobDef>
  
  <RecipeDef ParentName="SurgeryFlesh">
    <defName>InstallHyperManipulator</defName>
    <label>install physic manipulator</label>
    <description>Install a physic manipulator.</description>
    <workerClass>Recipe_InstallImplant</workerClass>
    <jobString>Installing physic manipulator.</jobString>
    <workAmount>6000</workAmount>
    <deathOnFailedSurgeryChance>0</deathOnFailedSurgeryChance>
    <!-- <targetCountAdjustment>1</targetCountAdjustment> -->
    <skillRequirements>
      <Medicine>8</Medicine>
    </skillRequirements>
    <ingredients>
      <li>
        <filter>
          <categories>
            <li>Medicine</li>
          </categories>
        </filter>
        <count>3</count>
      </li>
      <li>
        <filter>
          <thingDefs>
            <li>HyperManipulator</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <categories>
        <li>Medicine</li>
      </categories>
      <thingDefs>
        <li>HyperManipulator</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>CentaurScapular</li>
    </appliedOnFixedBodyParts>
    <addsHediff>HyperManipulator</addsHediff>
  </RecipeDef>
  
<HediffDef ParentName="ImplantHediffBase">
    <defName>MentalBurster</defName>
    <label>mental burster</label>
    <labelNoun>a mental burster</labelNoun>
	<description>A brain implant for centaurs to increase one's consciousness and reduce pain.</description>
    <defaultLabelColor>(0.5, 0.75, 1)</defaultLabelColor>
	<comps>
		<li Class="HediffCompProperties_HealPermanentWounds" />
	</comps>
    <stages>
      <li>
        <painFactor>0.85</painFactor>
        <painOffset>-0.15</painOffset>
		<partEfficiencyOffset>0.15</partEfficiencyOffset>
        <partIgnoreMissingHP>true</partIgnoreMissingHP>
        <capMods>
          <li>
            <capacity>Talking</capacity>
            <offset>-0.05</offset>
            <!-- <postFactor>2</postFactor> -->
            <!-- <setMax>0</setMax> -->
          </li>
        </capMods>
		<statOffsets>
			<PainShockThreshold>99999</PainShockThreshold>
		</statOffsets>
      </li>
    </stages>
    <!-- <addedPartProps>
      <solid>false</solid>
      <partEfficiency>1.15</partEfficiency>
      <betterThanNatural>true</betterThanNatural>
    </addedPartProps> -->
    <spawnThingOnRemoved>MentalBurster</spawnThingOnRemoved>
  </HediffDef>
  
  <ThingDef ParentName="ImplantBase">
    <defName>MentalBurster</defName>
    <label>mental burster</label>
    <!-- <description>A brain implant for centaurs which inhibits used to reactivate one's remote manipulate ability.</description> -->
	<description>A brain implant for centaurs to increase one's consciousness and reduce pain, but not completely removes pain as what painstopper do.</description>
    <graphicData>
      <texPath>Things/Item/Health/HealthItemBionic</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>0.80</drawSize>
    </graphicData>
    <thingSetMakerTags>
      <!-- <li>RewardSpecial</li> -->
    </thingSetMakerTags>
    <statBases>
      <MarketValue>800</MarketValue>
      <Mass>0.08</Mass>
    </statBases>
    <techHediffsTags>
      <!-- <li>Advanced</li> -->
    </techHediffsTags>
    <tradeability>Sellable</tradeability>
  </ThingDef>

  <RecipeDef ParentName="SurgeryFlesh">
    <defName>InstallMentalBurster</defName>
    <label>install mental burster</label>
    <description>Install a mental burster.</description>
    <workerClass>Recipe_InstallImplant</workerClass>
    <jobString>Installing mental burster.</jobString>
    <workAmount>3700</workAmount>
    <deathOnFailedSurgeryChance>0.10</deathOnFailedSurgeryChance>
    <skillRequirements>
      <Medicine>8</Medicine>
    </skillRequirements>
    <ingredients>
      <li>
        <filter>
          <categories>
            <li>Medicine</li>
          </categories>
        </filter>
        <count>3</count>
      </li>
      <li>
        <filter>
          <thingDefs>
            <li>MentalBurster</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <categories>
        <li>Medicine</li>
      </categories>
      <thingDefs>
        <li>MentalBurster</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Brain</li>
    </appliedOnFixedBodyParts>
    <addsHediff>MentalBurster</addsHediff>
  </RecipeDef>
</Defs>